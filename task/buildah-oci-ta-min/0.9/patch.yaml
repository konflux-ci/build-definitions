- op: replace
  path: /metadata/name
  value: buildah-oci-ta-min
# kustomize build task/buildah-oci-ta/0.9 | yq '.spec.steps.[].name' | nl -v 0Â 
#      0	use-trusted-artifact
#      1	build
#      2	push
#      3	sbom-syft-generate
#      4	prepare-sboms
#      5	upload-sbom
# StepTemplate
- op: replace
  path: /spec/stepTemplate/computeResources/limits/memory
  value: 256Mi
- op: replace
  path: /spec/stepTemplate/computeResources/requests/memory
  value: 256Mi
- op: replace
  path: /spec/stepTemplate/computeResources/requests/cpu
  value: 100m

# build step
- op: test
  path: /spec/steps/1/name
  value: build
- op: replace
  path: /spec/steps/1/computeResources/limits/memory
  value: 1Gi
- op: replace
  path: /spec/steps/1/computeResources/requests/memory
  value: 1Gi
- op: replace
  path: /spec/steps/1/computeResources/limits/cpu
  value: 500m
- op: replace
  path: /spec/steps/1/computeResources/requests/cpu
  value: 500m

# push step
- op: test
  path: /spec/steps/2/name
  value: push
- op: replace
  path: /spec/steps/2/computeResources/limits/memory
  value: 256Mi
- op: replace
  path: /spec/steps/2/computeResources/requests/memory
  value: 256Mi
- op: replace
  path: /spec/steps/2/computeResources/limits/cpu
  value: 100m
- op: replace
  path: /spec/steps/2/computeResources/requests/cpu
  value: 100m

# sbom-syft-generate step
- op: test
  path: /spec/steps/3/name
  value: sbom-syft-generate
- op: replace
  path: /spec/steps/3/computeResources/limits/memory
  value: 512Mi
- op: replace
  path: /spec/steps/3/computeResources/requests/memory
  value: 512Mi
- op: replace
  path: /spec/steps/3/computeResources/limits/cpu
  value: 256m
- op: replace
  path: /spec/steps/3/computeResources/requests/cpu
  value: 256m

# prepare-sboms step
- op: test
  path: /spec/steps/4/name
  value: prepare-sboms
- op: replace
  path: /spec/steps/4/computeResources/limits/memory
  value: 256Mi
- op: replace
  path: /spec/steps/4/computeResources/requests/memory
  value: 256Mi
- op: replace
  path: /spec/steps/4/computeResources/limits/cpu
  value: 100m
- op: replace
  path: /spec/steps/4/computeResources/requests/cpu
  value: 100m

# upload-sbom step
- op: test
  path: /spec/steps/5/name
  value: upload-sbom
- op: replace
  path: /spec/steps/5/computeResources/limits/memory
  value: 256Mi
- op: replace
  path: /spec/steps/5/computeResources/requests/memory
  value: 256Mi
- op: replace
  path: /spec/steps/5/computeResources/limits/cpu
  value: 100m
- op: replace
  path: /spec/steps/5/computeResources/requests/cpu
  value: 100m

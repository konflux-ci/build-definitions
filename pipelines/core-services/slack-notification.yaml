- op: add
  path: /spec/params/-
  value:
    name: slack-webhook-notification-team
    default: ""
- op: add
  path: /spec/tasks/-
  value:
    name: extract-slack-message
    taskRef:
      name: extract-slack-notification-message
      version: "0.1"
    params:
    - name: pipeline-run-name
      value: $(context.pipelineRun.name)
- op: add
  path: /spec/finally/-
  value:
    name: slack-webhook-notification
    taskRef:
      name: slack-webhook-notification
      version: "0.1"
    when:
    - input: $(params.slack-webhook-notification-team)
      operator: notin
      values: [""]
    - input: $(tasks.status)
      operator: in
      values: ["Failed"]
    params:
    - name: message
      value: $(tasks.extract-slack-message.results.message)
    - name: key-name
      value: $(params.slack-webhook-notification-team)

---
- op: replace
  path: /metadata/name
  value: java-builder
- op: replace
  path: /metadata/labels
  value:
    "pipelines.openshift.io/used-by": "build-cloud"
    "pipelines.openshift.io/runtime": "java"
    "pipelines.openshift.io/strategy": "s2i"
- op: replace
  path: /spec/tasks/3/taskRef
  value:
    name: s2i-java
    version: "0.1"
- op: add
  path: /spec/tasks/3/params
  value:
  - name: PATH_CONTEXT
    value: $(params.path-context)
  - name: IMAGE
    value: "$(params.output-image)"
  - name: DOCKER_AUTH
    value: "$(tasks.init.results.container-registry-secret)"
  - name: IMAGE_EXPIRES_AFTER
    value: "$(params.image-expires-after)"
- op: add
  path: /spec/results/-
  value:
    name: JAVA_COMMUNITY_DEPENDENCIES
    value: $(tasks.build-container.results.JAVA_COMMUNITY_DEPENDENCIES)
